<!DOCTYPE html>
<html lang="ru">
<head>
  <title>Функциональное программирование в JavaScript. Введение — Talks — Руслан Хуснетдинов</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="libs/shower/themes/shower-material/styles/screen-16x10.css">
  <link rel="stylesheet" href="libs/highlight/styles/atom-one-light.css">
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="shower list">

  <header class="caption">
    <h1>Функциональное программирование в JavaScript. Введение</h1>
    <p>Руслан Хуснетдинов</p>
  </header>

  <section class="slide slide-cover" id="cover">
    <h2>Функциональное программирование<br>в JavaScript<br><br>Введение</h2>
  </section>

  <section class="slide slide-2">
    <h2>Функция</h2>
    <figure>
      <blockquote>
        <p>Функция в математике — соответствие между элементами двух множеств, установленное по такому правилу, что каждому элементу одного множества ставится в соответствие некоторый элемент из другого множества.</p>
      </blockquote>
      <figcaption><a href="https://ru.wikipedia.org/wiki/Функция_(математика)">Википедия</a></figcaption>
    </figure>
  </section>

  <section class="slide slide-cover">
    <figure>
      <img class="cover cover-md" src="./images/catbox.jpg" alt="Cats in box in box.">
    </figure>
  </section>

  <section class="slide slide-4">
    <h2>Функция</h2>
    <figure>
      <blockquote>
        <p>Функция в программировании — фрагмент программного кода, к которому можно обратиться из другого места программы.</p>
      </blockquote>
      <figcaption><a href="https://ru.wikipedia.org/wiki/Функция_(программирование)">Википедия</a></figcaption>
    </figure>
    <p class="next"><b>Функция</b> — это программа, которая описывает связь между одними данными и другими.</p>
  </section>

  <section class="slide slide-5">
    <h2>Пример</h2>
    <pre>
      <code class="javascript">
const square = function (x) {
  return x * x;
}
      </code>
    </pre>
  </section>

  <section class="slide">
    <h2>Пример</h2>
    <pre class="column">
      <code class="javascript">
const square = (x) => x * x;
      </code>
    </pre>
  </section>

  <section class="slide">
    <h2>Пример</h2>
    <pre class="column">
      <code class="javascript">
const square = (x) => x * x;

const x0 = 0;
const x1 = 1;
const x2 = 2;
const x3 = 3;
      </code>
    </pre>
  </section>

  <section class="slide">
    <h2>Пример</h2>
    <pre class="column">
      <code class="javascript">
const square = (x) => x * x;

const x0 = 0;
const x1 = 1;
const x2 = 2;
const x3 = 3;
      </code>
    </pre>
    <pre class="column">
      <code class="javascript">


const y0 = square(x0); // 0
const y1 = square(x1); // 1
const y2 = square(x2); // 4
const y3 = square(x3); // 9
      </code>
    </pre>
  </section>

  <section class="slide slide-9">
    <h2>Пример</h2>
    <pre>
      <code class="javascript">
const square = (x) => x * x;

const data1 = [0, 1, 2, 3]
const data2 = data1.map(square);

data2;     // [0, 1, 4, 9]
      </code>
    </pre>
  </section>

  <section class="slide slide-10">
    <h2>Объект первого класса</h2>
    <p>В JavaScript функции являются объектами первого класса (<i>First Class Citizen</i>). То есть мы можем создавать их в любом месте, передавать в качетсве аргументов в другие функции и т.д.</p>
    <p><b>Функция есть значение</b>.</p>
  </section>

  <section class="slide slide-11 slide-right">
    <h2>Чистая функция</h2>
    <p><b>Чистая функция</b> (<i>pure function</i>) — функция, которая не имеет побочных эффектов и является детерминированной.</p>
    <p class="next"><b>Побочный эффект</b> (<i>side effect</i>) — возможность функции читать и модифицировать значения глобальных переменных и осуществлять операции ввода-вывода.</p>
    <p class="next"><b>Детерминированная функция</b> — функция, которая всегда возвращают одно и то же значение для одних и тех же аргументов.</p>
  </section>

  <section class="slide slide-cover">
    <figure>
      <img class="cover cover-md" src="./images/pure.gif" alt="Thinking">
    </figure>
  </section>

  <section class="slide slide-12">
    <h2>Пример</h2>
    <pre>
      <code class="javascript">
// Нечистая функция
const sum = (x) => num + x;

let num = 5;
let result = sum(2); // 7

num = result; // 7
result = sum(result); // 14
      </code>
    </pre>
  </section>

  <section class="slide slide-13">
    <h2>Пример</h2>
    <pre>
      <code class="javascript">
// Чистая функция
const sum = (a, b) => a + b;

const num = 5;
const result = sum(num, 2); // 7

const newNum = result; // 7
const newResult = sum(newNum, result); // 14
      </code>
    </pre>
  </section>

  <section class="slide slide-14">
    <h2>Неизменяемость</h2>
    <p><b>Неизменяемые данные</b> (<i>immutable</i>) — данные, которые нельзя изменить.</p>
  </section>

  <section class="slide slide-cover">
    <figure>
      <img class="cover cover-md" src="./images/thinking.gif" alt="Thinking">
    </figure>
  </section>

  <section class="slide slide-15">
    <h2>Пример</h2>
    <pre>
      <code class="javascript">
// Изменяемые данные
const arr = [1, 2, 3];
arr.push(4);

arr; // [1, 2, 3, 4]
      </code>
    </pre>
  </section>

  <section class="slide slide-15">
    <h2>Пример</h2>
    <pre>
      <code class="javascript">
// Изменяемые данные (плохой пример)
const arr = [1, 2, 3];
const mutate = (arr) => arr.push(4);

arr; // [1, 2, 3]
const newArr = mutate(arr);
newArr // [1, 2, 3, 4]
      </code>
    </pre>
  </section>

  <section class="slide slide-cover">
    <figure>
      <img class="cover cover-md" src="./images/mutation.gif" alt="Thinking">
    </figure>
  </section>

  <section class="slide slide-16">
    <h2>Пример</h2>
    <pre>
      <code class="javascript">
// Изменяемые данные, которые не изменяют
const arr = [1, 2, 3];
const newArr = [...arr, 4];

arr; // [1, 2, 3]
newArr; // [1, 2, 3, 4]
      </code>
    </pre>
  </section>

  <section class="slide slide-17">
    <h2>Пример</h2>
    <pre>
      <code class="javascript">
// Неизменяемые данные
const arr = Object.freeze([1, 2, 3]);
const newArr = Object.freeze([...arr, 4]);

arr; // [1, 2, 3]
newArr; // [1, 2, 3, 4]
      </code>
    </pre>
  </section>

  <section class="slide slide-18">
    <h2>Пример</h2>
    <pre>
      <code class="javascript">
// Неизменяемые данные (Immutable.js)
const arr = Immutable.List([1, 2, 3]);
const newArr = array.push(4);

arr; // [1, 2, 3]
newArr; // [1, 2, 3, 4]
      </code>
    </pre>
  </section>

  <section class="slide slide-cover">
    <figure>
      <img class="cover cover-md" src="./images/immutable.gif" alt="Immutable">
    </figure>
  </section>

  <section class="slide slide-19">
    <h2>Функция высшего порядка</h2>
    <p><b>Функция высшего порядка</b> (<i>higher-order function</i>) — функция, которая принимает в качестве аргументов или возвращает другие фунции.</p>
  </section>

  <section class="slide">
    <h2>Пример</h2>
    <pre>
      <code class="javascript">
const apply = (f) => (x) => f(x);

const dubble = (x) => 2 * x;
const number = 6;
const newNumber = apply(dubble)(number);

newNumber; // 12
      </code>
    </pre>
  </section>

  <section class="slide">
    <h2>Функции map, filter и reduce</h2>
    <figure>
      <blockquote>
        <p>Цикл – это жёсткая управляющая конструкция, которую нелегко использовать повторно и сложно состыковать с другими операциями. Кроме того, использование циклов означает появление кода, который меняется с каждой итерацией.</p>
      </blockquote>
      <figcaption><a href="https://www.manning.com/books/functional-programming-in-javascript">Луис Атенцио. Функциональное программирование в JavaScript.</a></figcaption>
    </figure>
    <p>Функции <code>map</code>, <code>filter</code> и <code>reduce</code> являются альтернативой циклам.</p>
  </section>

  <section class="slide">
    <h2>Функция map</h2>
    <p><b>Map</b> — функция высшего порядка, которая применяет передаваемую ей функцию ко всем элементам передаваемого ей массива и возвращает новый массив, состоящий из результатов этого применения.</p>
    <p>Это функция трансформации.</p>
  </section>

  <section class="slide">
    <h2>Пример</h2>
    <pre>
      <code class="javascript">
// Цикл
const arr = [1, 2, 3];
const dubble = (x) => 2 * x;
const newArr = [];

for (let i = 0; i < arr.length; i++) {
  newArr.push(dubble(arr[i]));
}

newArr; // [2, 4, 6]
      </code>
    </pre>
  </section>

  <section class="slide">
    <h2>Пример</h2>
    <pre>
      <code class="javascript">
// Map
const arr = [1, 2, 3];
const dubble = (x) => 2 * x;
const newArr = arr.map(dubble);

newArr; // [2, 4, 6]
      </code>
    </pre>
  </section>

  <section class="slide">
    <h2>Функция filter</h2>
    <p><b>Filter</b> — функция высшего порядка, которая применяет передаваемую ей функцию ко всем элементам передаваемого ей массива и возвращает новый массив, состоящий из элементов первоначального массива, для которых передаваемая функция вернула истинное значение.</p>
    <p>Это функция фильтрации.</p>
  </section>

  <section class="slide slide-right">
    <h2>Пример</h2>
    <pre>
      <code class="javascript">
// Цикл
const arr = [1, 2, 3];
const newArr = [];

for (let i = 0; i < arr.length; i++) {
  let value = arr[i];
  if (value % 2 === 0) {
    newArr.push(value);
  }
}

newArr; // [2]
      </code>
    </pre>
  </section>

  <section class="slide">
    <h2>Пример</h2>
    <pre>
      <code class="javascript">
// Filter
const arr = [1, 2, 3];
const newArr = arr.filter((value) => value % 2 === 0);

newArr; // [2]
      </code>
    </pre>
  </section>

  <section class="slide">
    <h2>Функция reduce</h2>
    <p><b>Reduce</b> — функция высшего порядка, которая применяет передаваемую ей функцию к передаваемому ей аккумулятору и ко всем элементам передаваемого ей массива и возвращает значение итогового аккумулятора.</p>
    <p>Это функция свёртки.</p>
  </section>

  <section class="slide">
    <h2>Пример 1</h2>
    <pre>
      <code class="javascript">
// Цикл
const arr = [1, 2, 3];
let acc = 0;

for (let i = 0; i < arr.length; i++) {
  acc = acc + arr[i];
}

acc; // 6
      </code>
    </pre>
  </section>

  <section class="slide">
    <h2>Пример 1</h2>
    <pre>
      <code class="javascript">
// Reduce
const arr = [1, 2, 3];
const acc = arr.reduce((acc, value) => acc + value);

acc; // 6
      </code>
    </pre>
  </section>

  <section class="slide slide-right">
    <h2>Пример 2</h2>
    <pre>
      <code class="javascript">
// Цикл
const arr = [1, 2, 3];
let max;

for (let i = 0; i < arr.length; i++) {
  let value = arr[i];
  if (!max || max < value) {
    max = value;
  }
}

max; // 3
      </code>
    </pre>
  </section>

  <section class="slide">
    <h2>Пример 2</h2>
    <pre>
      <code class="javascript">
// Reduce
const arr = [1, 2, 3];
const max = arr.reduce((acc, value) =>
  acc > value ? acc : value
);

max; // 3
      </code>
    </pre>
  </section>

  <section class="slide slide-right">
    <h2>Рекурсия</h2>
    <p><b>Рекурсия</b> (<i>recursion</i>) — процесс вызова функции самой себя.</p>
    <p class="next">При <b>рекурсивном процессе</b> программа откладывает вычисления до возвращения функцией её значения, сохраняя на каждом шаге эти вычисления в памяти.</p>
    <p class="next">При <b>итеративном процессе</b> (хвостовая рекурсия) программа производит все вычисления сразу и передает их дальше, незаписывая их в память.</p>
  </section>

  <section class="slide slide-cover">
    <figure>
      <img class="cover cover-md" src="./images/recursion-0.gif" alt="Recursion">
    </figure>
  </section>

  <section class="slide">
    <h2>Пример 1.1</h2>
    <pre>
      <code class="javascript">
// Рекурсивный процесс
const factorial = (n) => {
  if (n === 1) {
    return 1;
  }

  return n * factorial(n - 1);
};

const num = factorial(5); // 120
      </code>
    </pre>
  </section>

  <section class="slide slide-cover">
    <figure>
      <img class="cover cover-md" src="./images/recursion-1.gif" alt="Recursion">
    </figure>
  </section>

  <section class="slide">
    <h2>Пример 1.2</h2>
    <pre>
      <code class="javascript">
// Итеративный процесс
const factorial = (n, acc = 1) => {
  if (n === 1) {
    return acc;
  }
  const newAcc = acc ? acc * n : n;
  return factorial(n - 1, newAcc);
};

const num = factorial(5); // 120
      </code>
    </pre>
  </section>

  <section class="slide">
    <h2>Пример 2</h2>
    <pre>
      <code class="javascript">
// Реализация map
const map = (arr, f, acc = []) => {
  if (!arr.length) {
    return acc;
  }
  const [head, ...tail] = arr;
  const newAcc = [...acc, f(head)];

  return map(tail, f, newAcc);
};
      </code>
    </pre>
  </section>

  <section class="slide">
    <h2>Пример 3</h2>
    <pre>
      <code class="javascript">
// Реализация filter
const filter = (arr, f, acc = []) => {
  if (!arr.length) {
    return acc;
  }
  const [head, ...tail] = arr;
  const newAcc = f(head) ? [...acc, head] : acc;

  return filter(tail, f, newAcc);
};
      </code>
    </pre>
  </section>

  <section class="slide">
    <h2>Пример 4</h2>
    <pre>
      <code class="javascript">
// Реализация reduce
const reduce = (arr, f, acc) => {
  if (!arr.length) {
    if (acc) { return acc } else { throw new Error() }
  }
  const [head, ...tail] = arr;
  const newAcc = acc ? f(acc, head) : head;

  return reduce(tail, f, newAcc);
};
      </code>
    </pre>
  </section>

  <section class="slide" id="see-more">
    <h2>Спасибо за внимание!</h2>
    <ul>
      <li><a href="https://twitter.com/ruslanxdev">twitter.com/ruslanxdev</a></li>
      <li><a href="https://github.com/ruslanxdev">github.com/ruslanxdev</a></li>
    </ul>
  </section>

  <div class="progress"></div>

  <script src="libs/shower/shower.min.js"></script>
  <script src="libs/highlight/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

</body>
</html>
